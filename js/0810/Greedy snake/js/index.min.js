(function(){var a={getRandom:function(c,b){c=Math.ceil(c);b=Math.floor(b);return Math.floor(Math.random()*(b-c+1))+c},getColor:function(){var e=this.getRandom(0,255);var d=this.getRandom(0,255);var c=this.getRandom(0,255);return"rgb("+e+","+d+","+c+")"}};window.Tools=a})();(function(){function a(c){c=c instanceof Object?c:{};this.width=c.width||20;this.height=c.height||20;this.x=c.x||0;this.y=c.y||0;this.color=c.color||"green";this.elements=[]}var b="absolute";a.prototype.render=function(d){var c=document.createElement("div");this.x=Tools.getRandom(0,d.clientWidth/this.width-1)*this.width;this.y=Tools.getRandom(0,d.clientHeight/this.height-1)*this.height;c.style.width=this.width+"px";c.style.height=this.height+"px";c.style.left=this.x+"px";c.style.top=this.y+"px";c.style.backgroundColor=this.color;c.style.position=b;d.appendChild(c);this.elements.push(c)};a.prototype.remove=function(d,c){d.removeChild(this.elements[c]);this.elements.splice(c,1)};window.Food=a})();(function(){var b="absolute";function a(c){c=c instanceof Object?c:{};this.width=c.width||20;this.height=c.height||20;this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"},];this.direction="right";this.elements=[]}a.prototype.render=function(g){for(var d=0,c=this.body.length;d<c;d++){var e=this.body[d];var f=document.createElement("div");f.style.width=this.width+"px";f.style.height=this.height+"px";f.style.left=e.x*this.width+"px";f.style.top=e.y*this.height+"px";f.style.position=b;f.style.backgroundColor=e.color;g.appendChild(f);this.elements.push(f)}};a.prototype.move=function(){for(var d=this.body.length-1;d>0;d--){this.body[d].x=this.body[d-1].x;this.body[d].y=this.body[d-1].y}var c=this.body[0];switch(this.direction){case"right":c.x+=1;break;case"left":c.x-=1;break;case"top":c.y-=1;break;case"bottom":c.y+=1}};a.prototype.remove=function(d){for(var c=this.elements.length-1;c>=0;c--){d.removeChild(this.elements[c])}this.elements=[]};window.Snake=a})();(function(){var b;function d(e){this.food=new Food();this.snake=new Snake();this.map=e;b=this}d.prototype.start=function(){this.food.render(this.map);this.food.render(this.map);this.food.render(this.map);a();c()};function c(){document.onkeydown=function(f){console.log(f.keyCode);switch(f.keyCode){case 37:b.snake.direction="left";break;case 38:b.snake.direction="top";break;case 39:b.snake.direction="right";break;case 40:b.snake.direction="bottom";break}}}function a(){var e=setInterval(function(){b.snake.move();b.snake.remove(b.map);b.snake.render(b.map);var k=b.map.offsetWidth/b.snake.width;var h=b.map.offsetHeight/b.snake.height;var f=b.snake.body[0].x;var m=b.snake.body[0].y;var l=f*b.snake.width;var j=m*b.snake.height;for(i=0;i<b.food.elements.length;i++){if(b.food.elements[i].offsetLeft===l&&b.food.elements[i].offsetTop===j){b.food.remove(b.map,i);b.food.render(b.map);var g=b.snake.body[b.snake.body.length-1];b.snake.body.push({x:g.x,y:g.y,color:g.color,})}}if(f<0||f>=k||m<0||m>=h){clearInterval(e);alert("你完犊子啦 ，哈哈~~")}},150)}window.Game=d})();(function(){var b=document.getElementById("map");var a=new Game(b);a.start()})();